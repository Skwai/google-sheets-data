'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};Object.defineProperty(exports,'__esModule',{value:!0});function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}const GOOGLE_SHEETS_URL='https://spreadsheets.google.com/feeds/list/%s/od6/public/values?alt=json',COL_PREFIX='gsx$';class GoogleSheetsData{constructor(a){if(!a)throw Error('You must supply a `sheetId` to the constructor');Object.assign(this,{sheetId:a})}getData(){var a=this;return _asyncToGenerator(function*(){const b=yield GoogleSheetsData.fetchSheetData(a.sheetId);return GoogleSheetsData.mapRows(b.feed.entry)})()}static mapRows(a){return a.map(GoogleSheetsData.mapRow)}static mapRow(a){const b=GoogleSheetsData.getRowKeys(a);return b.reduce((b,c)=>{const d=GoogleSheetsData.stripColumnPrefix(c);return Object.assign(_extends({},b,{[d]:a[c].$t}))},{})}static stripColumnPrefix(a){return a.replace(COL_PREFIX,'')}static getRowKeys(a){return Object.keys(a).filter((a)=>a.includes(COL_PREFIX))}static fetchSheetData(a){return _asyncToGenerator(function*(){const b=GOOGLE_SHEETS_URL.replace('%s',a),c=yield fetch(b,{mode:'cors'});return c.json()})()}}exports.default=GoogleSheetsData;

//# sourceMappingURL=index.js.map